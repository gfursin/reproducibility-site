<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Reproducibility Breakdown - DataMill</title>
  <link rel="stylesheet" href="/reproducibility-site/js/lightbox2-master/dist/css/lightbox.min.css">
  <link rel="stylesheet" href="/reproducibility-site/css/bootstrap.min.css">
  <link rel="stylesheet" href="/reproducibility-site/css/app.css">
  <link rel="stylesheet" href="/reproducibility-site/css/post.css">
  <link rel="stylesheet" href="/reproducibility-site/css/zenburn.css">
</head>
<body>

<nav class="navbar navbar-default navbar-fixed-top" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">Reproducibility Breakdown: DataMill</a>
    </div>
    <nav class="collapse navbar-collapse" role="navigation">
      <ul class="nav navbar-nav navbar-right">
        <li class='dropdown'>
          <a href="#" class='dropdown-toggle' data-toggle='dropdown' role='button' aria-haspopup='true' aria-expanded='false'>Projects <span class='caret'></span></a>
          <ul class='dropdown-menu'>
            <li><a href="/reproducibility-site/projects/collective_knowledge.html">Collective Knowledge</a></li>
            <li><a href="/reproducibility-site/projects/occam.html">Occam</a></li>
            <li><a href="/reproducibility-site/projects/datamill.html">DataMill</a></li>
            <li><a href="/reproducibility-site/projects/dataverse.html">Dataverse</a></li>
            <li><a href="/reproducibility-site/projects/researchcompendia.html">ResearchCompendia</a></li>
            <li><a href="/reproducibility-site/projects/runmycode.html">RunMyCode</a></li>
            <li><a href="/reproducibility-site/projects/osf.html">Open Science Framework</a></li>
            <li><a href="/reproducibility-site/projects/jupyter.html">Jupyter</a></li>
            <li><a href="/reproducibility-site/projects/labcloud.html">Helix Lab Cloud</a></li>
            <li><a href="/reproducibility-site/projects/tira.html">TIRA</a></li>
            <li><a href="/reproducibility-site/projects/apt.html">Apt</a></li>
            <li><a href="/reproducibility-site/projects/hubzero.html">HUBzero</a></li>
            <li><a href="/reproducibility-site/projects/olive.html">OLIVE</a></li>
          </ul>
        </li>
        <li>
          <a href="/reproducibility-site/rubric.html">Rubric</a>
        </li>
        <li>
          <a href="https://github.com/wilkie/reproducibility-site">View on GitHub</a>
        </li>
      </ul>
    </nav>
  </div>
</nav>

<div id="masthead">
  <div class="container">
      <div class="row">
        
        <div class="col-md-5">
          <h1>DataMill
            <p class="lead"></p>
          </h1>
        </div>
        <div class="col-md-7">
            <div class="well well-lg">
              <div class="row">
                <div class="col-sm-5">
                  <img src="/reproducibility-site/images/logos/datamill/logo.png" class="img-responsive logo ">
                </div>
                <div class="col-sm-7">
                  <p>DataMill is a community-based, easy-to-use, open source infrastructure for performance evaluation.</p>
<div class='clear'></div>
                </div>
              </div>
            </div>
        </div>
        
      </div>
  </div><!--/container-->
</div><!--/masthead-->

<!--main-->
<div class="container">
	<div class="row">
      <!--left-->
      <div class="col-md-3" id="leftCol">
        <ul id='sidebar' class='nav nav-stacked'><li><a href='#about'>About</a></li><li><a href='#motivation'>Motivation</a></li><li><a href='#rubric'>Rubric</a></li><li><a href='#walkthrough'>Walkthrough</a></li><li><a href='#infrastructure'>Infrastructure</a></li><li><a href='#capabilities'>Capabilities</a></li><li><a href='#access'>Access</a></li><li><a href='#provenance'>Provenance</a></li><li><a href='#governance'>Governance</a></li><li><a href='#strengths'>Strengths</a></li><li><a href='#weaknesses'>Weaknesses</a></li><li><a href='#unique_features'>Unique Features</a></li><li><a href='#best_practice_influences'>Best-Practice Influences</a></li><li><a href='#digital_library_incorporation_issues'>Digital Library Incorporation Issues</a></li></ul>
      </div><!--/left-->

      <!--right-->
      <div class="col-md-9">
        <div class='content'>
          <article>
            <h2 id='about'>About</h2><h3 id='authors'>Authors</h3>
<p><a href='https://uwaterloo.ca/embedded-software-group/people-profiles/sebastian-fischmeister' title=''>Sebastian Fischmeister</a></p>

<p>Amir Reza Ghods</p>

<p><a href='https://uwaterloo.ca/embedded-software-group/people-profiles/thomas-reidemeister' title=''>Thomas Reidemeister</a></p>

<p><a href='https://uwaterloo.ca/embedded-software-group/people-profiles/augusto-born-oliveira' title=''>Augusto Born de Oliveira</a></p>

<p><a href='https://uwaterloo.ca/embedded-software-group/people-profiles/jean-christophe-petkovich' title=''>Jean-Christophe Petkovich</a></p>

<p>Yuguang Zhang</p>
<h3 id='information'>Information</h3>
<p><strong>Type</strong>: Infrastructure Service</p>

<p><strong>License</strong>: AGPLv3</p>

<p><strong>Timeline</strong>: 2013-present</p>

<p><strong>Institution</strong>: University of Waterloo</p>
<h3 id='links'>Links</h3>
<p><a href='https://datamill.uwaterloo.ca/' title=''>Main Site</a> (datamill.uwaterloo.ca)</p>

<p><a href='https://uwaterloo.ca/embedded-software-group/datamill' title=''>Project Site</a> (uwaterloo.ca)</p>

<p><a href='https://bitbucket.org/yuguang/datamill/' title=''>Source Code</a> (bitbucket.org)</p>
<h2 id='motivation'>Motivation</h2>
<p>From their <a href='https://uwaterloo.ca/embedded-software-group/datamill' title=''>project page</a>:</p>
<blockquote><p>Empirical systems research is facing a dilemma. Minor aspects of an experimental setup can have a significant impact on its associated performance measurements and potentially invalidate conclusions drawn from them. Examples of such influences, often called hidden factors, include binary link order, process environment size, compiler generated randomized symbol names, or group scheduler assignments. The growth in complexity and size of modern systems will further aggravate this dilemma, especially with the given time pressure of producing results. So how can one trust any reported empirical analysis of a new idea or concept in computer science?</p>

<p>DataMill facilitates producing robust, reliable, and reproducible results. The infrastructure incorporates the latest results on hidden factors and automates the variation of these factors.</p>
</blockquote><h2 id='rubric'>Rubric</h2>
<pre><code>  ✔ - Yes
  ✗ - No
  ○ - Yes, but with concession
  · - Inapplicable
  ? - Unknown
</code></pre>
<table><thead><tr><td class=''>Infrastructure</td><td class=''></td><td class=''></td></tr></thead><tbody><tr><td class=''>Self-Hosting</td><td class='feature no'>✗</td><td class=''>One cannot self-host a complete DataMill cluster. There are some instances where a worker node will communicate directly with a master node. These are hard-coded and there is no support or documentation given on how to establish either a master node or a worker node for that matter.</td></tr><tr><td class=''>Provides Metadata</td><td class='feature yes'>✔</td><td class=''></td></tr><tr><td class=''>Provides Hardware Diversity</td><td class='feature yes'>✔</td><td class=''></td></tr><tr><td class=''>Dispatches Work to Cloud Machines</td><td class='feature no'>✗</td><td class=''></td></tr><tr><td class=''>Provides a Web Portal</td><td class='feature yes'>✔</td><td class=''></td></tr><tr><td class=''>Provides Performance Monitoring</td><td class='feature unknown'>?</td><td class=''></td></tr></tbody></table><table><thead><tr><td class=''>Capabilities</td><td class=''></td><td class=''></td></tr></thead><tbody><tr><td class=''>Runs Code</td><td class='feature yes'>✔</td><td class=''>General Purpose: Can run anything that can be wrapped in several bash scripts and works on the infrastructure</td></tr><tr><td class=''>File Storage</td><td class='feature yes'>✔</td><td class=''></td></tr><tr><td class=''>Collaboration Controls</td><td class='feature unknown'>?</td><td class=''></td></tr><tr><td class=''>Provides Citations</td><td class='feature no'>✗</td><td class=''></td></tr><tr><td class=''>Interactive Graphing</td><td class='feature no'>✗</td><td class=''>You can download the resulting files. The service provides to further mechanism to read or interpret the result.</td></tr><tr><td class=''>Can Combine Objects</td><td class='feature no'>✗</td><td class=''>One package is executed. There is no method of combining existing artifacts and running them together or chaining them together.</td></tr><tr><td class=''>Can Archive/Run GUI Tools</td><td class='feature no'>✗</td><td class=''>Only non-interactive command line scripts.</td></tr><tr><td class=''>Can Hook to External Services</td><td class='feature no'>✗</td><td class=''></td></tr></tbody></table><table><thead><tr><td class=''>Access</td><td class=''></td><td class=''></td></tr></thead><tbody><tr><td class=''>Public view of object</td><td class='feature no'>✗</td><td class=''>All views of an object require logging in. Accounts are only manually given out.</td></tr><tr><td class=''>Access Permissions for Editing</td><td class='feature unknown'>?</td><td class=''></td></tr><tr><td class=''>Access Permissions for Reading</td><td class='feature unknown'>?</td><td class=''></td></tr><tr><td class=''>Access Permissions for Anon Review</td><td class='feature unknown'>?</td><td class=''></td></tr></tbody></table><table><thead><tr><td class=''>Provenance</td><td class=''></td><td class=''></td></tr></thead><tbody><tr><td class=''>Search</td><td class='feature yes'>✔</td><td class=''></td></tr><tr><td class=''>Globally Unique Identifiers for Projects</td><td class='feature no'>✗</td><td class=''>Only locally unique identifiers.</td></tr><tr><td class=''>Provides URL to Project / Data</td><td class='feature yes'>✔</td><td class=''></td></tr></tbody></table><table><thead><tr><td class=''>Governance</td><td class=''></td><td class=''></td></tr></thead><tbody><tr><td class=''>Open Source</td><td class='feature yes'>✔</td><td class=''>AGPLv3</td></tr><tr><td class=''>Allows Modification / Redistribution</td><td class='feature yes'>✔</td><td class=''></td></tr><tr><td class=''>Has a Free-to-Use Package</td><td class='feature no'>✗</td><td class=''></td></tr><tr><td class=''>Has a Student Package</td><td class='feature yes'>✔</td><td class=''>Only students and manually verified university researchers may make use of the service.</td></tr><tr><td class=''>Has a Paid Package</td><td class='feature not-available'>·</td><td class=''></td></tr></tbody></table><h2 id='walkthrough'>Walkthrough</h2>
<p>DataMill is a service that allows you to attach machines to use as worker nodes and create experiments which are to be scheduled and
executed among those workers. To do this, assuming there are already workers available and established, is to package up your work
in a particular way and upload it to the DataMill service.</p>

<p>To do that, you would write three scripts: <code>setup.sh</code>, <code>run.sh</code>, and <code>collect.sh</code>. Some examples (mostly the same as ones given
in <a href='https://uwaterloo.ca/embedded-software-group/publications/datamill-rigorous-performance-evaluation-made-easy' title=''>their paper</a>) follow:</p>
<h3 id='setup_sh'>setup.sh</h3>
<p>This script will be executed when the job is being prepared to run on the worker
node.</p>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="c">#!/bin/sh</span>

<span class="nb">cd</span> /dry
chmod +x dry.c <span class="c"># Apparently this is a compiled file?? I think you would build here.</span></code></pre></figure>
<h3 id='setup_sh'>setup.sh</h3>
<p>This script will execute the job. Any measurements that can be used on the worker
node will measure whatever this script runs.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/bin/sh</span>

<span class="nb">cd</span> /dry
./dry.c &gt;&gt; results 2&gt;&amp;1</code></pre></figure>
<h3 id='collect_sh'>collect.sh</h3>
<p>This cleans up and writes out any information the experimenter wants recorded.
The standard output when this runs will be recorded separately and made
available to download. Generally, you want this to be the data you want to pull
out of the experimentation.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/bin/sh</span>

<span class="nv">results</span><span class="o">=</span>dhrystone-<span class="sb">`</span>date +%Y%m%d_%H%M<span class="sb">`</span>.tar.gz
tar czf <span class="nv">$results</span> /dry/results &gt; /dev/null 2&gt;&amp;1
<span class="nb">echo</span> <span class="nv">$results</span></code></pre></figure>
<h3 id='uploading'>Uploading</h3>
<p>Once you have these three scripts (which you can test on a test virtual machine image)
you can create an experiment on the service. Assuming you have an account (you must
be affiliated with a university and your account will be manually moderated), you can
navigate to &quot;Experiments&quot; to find a &quot;Create new experiment&quot; button.</p>

<p>From here, you can specify the name and description of the experiment you will upload.
You can specify a <em>replicate count</em> which suggests how many times the experiment will run.
Tags can be recorded to help group and search for related experiments later.</p>

<p></p><div style='' class='image border'><a href='/reproducibility-site/images/projects/datamill/datamill_new_experiment_0.png' data-lightbox='image-0'><img src='/reproducibility-site/images/projects/datamill/datamill_new_experiment_0.png' class='' style='max-width: 500px;' title='' alt='Here you upload your scripts and data as a tarball. Simple metadata for the running experiment can be provided. You can specify you want to replicate the experiment a number of times.' /></a><br /><div class='caption' style='max-width: 500px;'><p>Here you upload your scripts and data as a tarball. Simple metadata for the running experiment can be provided. You can specify you want to replicate the experiment a number of times.</p>
</div></div><p></p>

<p>The next section allows the experimenter to specify the hardware requirements for the experimentation.
By default, the entire ranges are specified.
You can slide the bar from either end to restrict the possible hardware choices you will have.
At the bottom, the workers that can accommodate the requirements are highlighted.</p>

<p></p><div style='' class='image border'><a href='/reproducibility-site/images/projects/datamill/datamill_new_experiment_1.png' data-lightbox='image-1'><img src='/reproducibility-site/images/projects/datamill/datamill_new_experiment_1.png' class='' style='max-width: 500px;' title='' alt='Ranged sliders allow one to determine which known worker machines can be used to run the experiment.' /></a><br /><div class='caption' style='max-width: 500px;'><p>Ranged sliders allow one to determine which known worker machines can be used to run the experiment.</p>
</div></div><p></p>

<p>Once the requirements have been determined and that availability of workers assured, the next section
is used to toggle different features that can be used with the experiment.
These are well-known factors where the system can automatically influence the experiment.
For instance, different optimization flags can be toggled which will replicate and run the experiment
for each option. If you toggle <code>&#8209;O2</code> and <code>&#8209;O0</code> and also have both <code>gcc</code> and <code>llvm</code>, then the experiment
will run 4 times with each permutation of options. Each time, it will influence the standard environment
variables <code>CC</code> etc to reflect these choices. It is up to the scripts to react to those variables if it
is not automatic (for instance, within a <code>Makefile</code>).</p>

<p></p><div style='' class='image border'><a href='/reproducibility-site/images/projects/datamill/datamill_new_experiment_2.png' data-lightbox='image-2'><img src='/reproducibility-site/images/projects/datamill/datamill_new_experiment_2.png' class='' style='max-width: 500px;' title='' alt='Other factors can be toggled here that are specific to well-known applications available in the infrastructure such as compile flags.' /></a><br /><div class='caption' style='max-width: 500px;'><p>Other factors can be toggled here that are specific to well-known applications available in the infrastructure such as compile flags.</p>
</div></div><p></p>

<p>There are also <em>hardware factors</em> where an experimenter can select different hardware configurations and replicate
the experiment across different workers and architectures. This way, one can control for the hardware
or do a type of continuous testing across different platforms.</p>

<p>After the jobs complete, the experiment page will be populated with data and statistics about
the process. It will give the times for each of the three phases (setup, run, collect) for each
replicated run. It will also allow you to see breakdowns of each replicated job. You can download
the original uploaded package and also download a tar with the collected results from all jobs.</p>

<p></p><div style='' class='image border'><a href='/reproducibility-site/images/projects/datamill/datamill_view_experiment_0.png' data-lightbox='image-3'><img src='/reproducibility-site/images/projects/datamill/datamill_view_experiment_0.png' class='' style='max-width: 500px;' title='' alt='' /></a></div><p></p>

<p>The page for an individual run will show you the output of each of the three phases and whether or
not that phase succeeded. It gives you a breakdown of what was installed on the worker, what the kernel is, and
any other factors that were 1. requested and 2. available on the machine.</p>

<p></p><div style='' class='image border'><a href='/reproducibility-site/images/projects/datamill/datamill_view_experiment_1.png' data-lightbox='image-4'><img src='/reproducibility-site/images/projects/datamill/datamill_view_experiment_1.png' class='' style='max-width: 500px;' title='' alt='' /></a></div><p></p>

<p>From there, you can share your experiment to anyone with an account on DataMill.
There is no way to publicly share the experiment with anybody else.
You can fork/clone the experiment by downloading the package and reuploading it yourself
as your own experiment. The relationship and thus provenance, however, is lost.</p>
<h2 id='infrastructure'>Infrastructure</h2>
<p>There are a set of <em>worker nodes</em> that coordinate with a <em>master node</em>.
These worker nodes are provided by the community from places such as Purdue University and
the University of Pennsylvania (according to section 4.2 of their <a href='https://uwaterloo.ca/embedded-software-group/sites/ca.embedded-software-group/files/uploads/files/icpe13-datamill.pdf' title=''>paper</a>.)
These machines run Gentoo and a copy of the DataMill worker code.</p>

<p></p><div style='' class='image border'><a href='/reproducibility-site/images/projects/datamill/datamill_infrastructure_0.png' data-lightbox='image-5'><img src='/reproducibility-site/images/projects/datamill/datamill_infrastructure_0.png' class='' style='max-width: 500px;' title='' alt='The DataMill Infrastructure' /></a><br /><div class='caption' style='max-width: 500px;'><p>The DataMill Infrastructure</p>
</div></div><p></p>

<p>The worker nodes are manually established to have two partitions: a message partition that receives commands and a boot
partition that will run the actual experiment. This is so different flags and parameters can be established for the
experiment and can control for any impact of the message system. The system, when it receives a command to run an
experiment and a payload, will reboot the system into the boot system which will run the scripts and then reboot once more
back to the message partition.</p>

<p>Currently there are more than 25 machines available.
They represent various ARM and x86-64 (i586/Xeon/etc) chipsets and various GPU architectures.
DataMill will add workers as people from other institutions allow.</p>
<h2 id='capabilities'>Capabilities</h2><h2 id='access'>Access</h2>
<p>All views of experiments and data require an active DataMill account to view.
Therefore, you cannot easily share the work or any description of that work through the DataMill service
to any collaborators nor reviewers.
You cannot easily link to the experiment from a paper for the same reason.
You can download the generated files, however, and share those.</p>
<h2 id='provenance'>Provenance</h2>
<p>The experiments cannot pull information from other experiments nor the world at large.
The exception is any network activity that may happen in a setup script.
Some workers may not allow some network activity due to differences in environment
or firewall configurations.
Since there is no way to fork or clone, related experiments may not be recorded unless
tagged carefully.</p>

<p>Within the DataMill network, some relationships are known.
An experiment is tagged with its author and the time and date it was executed.
It knows what type of hardware and which machine it was executed upon.
It keeps track of the libraries resident on the machine along with the flags and logs of its setup
process and its runtime.</p>

<p>Therefore, it is strong hardware provenance and weaker relational provenance and data origin provenance.</p>
<h2 id='governance'>Governance</h2><h2 id='strengths'>Strengths</h2><h3 id='breakdown'>Breakdown</h3>
<ul>
<li>Easily dispatch on a diverse set of hardware</li>
<li>Simple to wrap experimentation</li>
<li>Keeps track of hardware and system environment parameters</li>
</ul>
<h2 id='weaknesses'>Weaknesses</h2><h3 id='breakdown'>Breakdown</h3>
<ul>
<li>Difficult to self-host and therefore centralized</li>
<li>Workers are constrained</li>
<li>No public access; open moderated accounts</li>
</ul>
<h2 id='unique_features'>Unique Features</h2>
<p>To be discussed.</p>
<h2 id='best_practice_influences'>Best-Practice Influences</h2>
<p>To be discussed.</p>
<h2 id='digital_library_incorporation_issues'>Digital Library Incorporation Issues</h2>
<p>To be discussed.</p>

          </article>
        </div>
        <div class='clear'></div>
      </div>
  	</div><!--/row-->
</div><!--/container-->

<footer><img src="/reproducibility-site/images/cc0.png"> This content is licensed: <a href="https://creativecommons.org/about/cc0/">cc-0</a> | <a href="https://github.com/wilkie/reproducibility-site/blob/master/projects/datamill.md">View this page on GitHub</a> | <a href="http://www.bootply.com/">Template based on Bootply</a> and built on <a href="http://getbootstrap.com/">Bootstrap</a>.
</footer>

<script src="/reproducibility-site/js/jquery.min.js"></script>
<script src="/reproducibility-site/js/lightbox2-master/dist/js/lightbox.min.js"></script>
<script src="/reproducibility-site/js/bootstrap.min.js"></script>
<script src="/reproducibility-site/js/angular.min.js"></script>
<script src="/reproducibility-site/js/app.js"></script>

</body>
</html>
